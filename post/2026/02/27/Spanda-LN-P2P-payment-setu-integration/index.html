<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/img/logo/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/logo/favicon-32x32.png"><meta name="application-name" content="Blake Chan"><meta name="apple-mobile-web-app-title" content="Blake Chan"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/img/logo/apple-touch-icon.png"><meta name="theme-color" content="#377bb5"><meta name="msapplication-TileColor" content="#377bb5"><title>4-Spanda-LN-P2P-payment-setu-integration | Blake Chan</title><meta name="description" content="Blake Chan (Blakechan) be the change you wish to see in the world.">
    <link rel="modulepreload" href="/assets/app.70947246.js"><link rel="modulepreload" href="/assets/index.html.4f396280.js"><link rel="modulepreload" href="/assets/index.html.a5ac8cb7.js"><link rel="prefetch" href="/assets/index.html.748e4e52.js"><link rel="prefetch" href="/assets/README.bak.html.dbd60c5d.js"><link rel="prefetch" href="/assets/index.html.377a037c.js"><link rel="prefetch" href="/assets/index.html.1cb9e6dc.js"><link rel="prefetch" href="/assets/index.html.f21ef63b.js"><link rel="prefetch" href="/assets/index.html.d856c620.js"><link rel="prefetch" href="/assets/index.html.c0f62510.js"><link rel="prefetch" href="/assets/index.html.81b4ec1d.js"><link rel="prefetch" href="/assets/index.html.3ee6a09f.js"><link rel="prefetch" href="/assets/index.html.e13ca450.js"><link rel="prefetch" href="/assets/index.html.2ba5f652.js"><link rel="prefetch" href="/assets/index.html.619ff710.js"><link rel="prefetch" href="/assets/404.html.7c518b82.js"><link rel="prefetch" href="/assets/index.html.28fa388e.js"><link rel="prefetch" href="/assets/index.html.271c9982.js"><link rel="prefetch" href="/assets/index.html.9329ab7b.js"><link rel="prefetch" href="/assets/index.html.4a09a784.js"><link rel="prefetch" href="/assets/index.html.92d483a2.js"><link rel="prefetch" href="/assets/index.html.db57d449.js"><link rel="prefetch" href="/assets/index.html.2666400f.js"><link rel="prefetch" href="/assets/index.html.420c95ec.js"><link rel="prefetch" href="/assets/index.html.5273102a.js"><link rel="prefetch" href="/assets/index.html.554aaadb.js"><link rel="prefetch" href="/assets/index.html.a0aee8d1.js"><link rel="prefetch" href="/assets/index.html.e07d945d.js"><link rel="prefetch" href="/assets/index.html.9ee2fc3b.js"><link rel="prefetch" href="/assets/README.bak.html.7b5a4f22.js"><link rel="prefetch" href="/assets/index.html.d6a4bd25.js"><link rel="prefetch" href="/assets/index.html.744ad8bc.js"><link rel="prefetch" href="/assets/index.html.11fb0e56.js"><link rel="prefetch" href="/assets/index.html.e41c6b17.js"><link rel="prefetch" href="/assets/index.html.97e26637.js"><link rel="prefetch" href="/assets/index.html.d11c5e33.js"><link rel="prefetch" href="/assets/index.html.ba7b4f6d.js"><link rel="prefetch" href="/assets/index.html.6c55acf1.js"><link rel="prefetch" href="/assets/index.html.b6f8c32e.js"><link rel="prefetch" href="/assets/index.html.5b077727.js"><link rel="prefetch" href="/assets/404.html.2a7825cf.js"><link rel="prefetch" href="/assets/index.html.1d66269d.js"><link rel="prefetch" href="/assets/index.html.104cf05d.js"><link rel="prefetch" href="/assets/index.html.3d5c6db0.js"><link rel="prefetch" href="/assets/index.html.4a93e94d.js"><link rel="prefetch" href="/assets/index.html.06b21a5e.js"><link rel="prefetch" href="/assets/index.html.45fdff73.js"><link rel="prefetch" href="/assets/index.html.77f27371.js"><link rel="prefetch" href="/assets/index.html.c8229353.js"><link rel="prefetch" href="/assets/index.html.0a995402.js"><link rel="prefetch" href="/assets/index.html.d4f7d26f.js"><link rel="prefetch" href="/assets/index.html.7a8ad659.js"><link rel="prefetch" href="/assets/index.html.bd00b000.js"><link rel="prefetch" href="/assets/404.d05803f7.js"><link rel="prefetch" href="/assets/About.2128e476.js"><link rel="prefetch" href="/assets/HomePage.9edfa7b8.js"><link rel="prefetch" href="/assets/Layout.772569a6.js"><link rel="prefetch" href="/assets/Links.6c42e1c2.js"><link rel="prefetch" href="/assets/Post.a3726f86.js"><link rel="prefetch" href="/assets/Proj.3ac1519e.js"><link rel="prefetch" href="/assets/Projs.6641a1d2.js"><link rel="prefetch" href="/assets/Tags.18440e63.js"><link rel="prefetch" href="/assets/mermaid.esm.min.a9b2af9b.js">
    <link rel="stylesheet" href="/assets/style.3b7ade60.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar invert"><span><a href="/" class=""><span class="site-name">$ cd /home/</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>Home</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/tags/" class="" aria-label="Tags"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>Tags</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/projs/" class="" aria-label="Projs"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 00-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 00-1.49.833L.11 7.607a.75.75 0 00.418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 001.11.418l2.774-1.707a1.75 1.75 0 00.833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0016 1.936V1.75A1.75 1.75 0 0014.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 00.119-.213v-2.066zM3.678 8.116L5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 00-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0114.063 1.5h.186a.25.25 0 01.25.25v.186a7.25 7.25 0 01-2.123 5.127l-.459.458a15.21 15.21 0 01-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 012.02-2.5l.458-.458h.002zM12 5a1 1 0 11-2 0 1 1 0 012 0zm-8.44 9.56a1.5 1.5 0 10-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 00.265.265c.671-.103 2.273-.416 3.005-1.148z"/></svg></span><span>Projs</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="Links"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>Links</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/about/" class="" aria-label="About"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"/></svg></span><span>About</span><!--[--><!--]--></a></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="Home"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>Home</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/tags/" class="" aria-label="Tags"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>Tags</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/projs/" class="" aria-label="Projs"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 00-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 00-1.49.833L.11 7.607a.75.75 0 00.418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 001.11.418l2.774-1.707a1.75 1.75 0 00.833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0016 1.936V1.75A1.75 1.75 0 0014.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 00.119-.213v-2.066zM3.678 8.116L5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 00-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0114.063 1.5h.186a.25.25 0 01.25.25v.186a7.25 7.25 0 01-2.123 5.127l-.459.458a15.21 15.21 0 01-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 012.02-2.5l.458-.458h.002zM12 5a1 1 0 11-2 0 1 1 0 012 0zm-8.44 9.56a1.5 1.5 0 10-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 00.265.265c.671-.103 2.273-.416 3.005-1.148z"/></svg></span><span>Projs</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="Links"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>Links</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/about/" class="" aria-label="About"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 224c-79.41 0-192 122.76-192 200.25 0 34.9 26.81 55.75 71.74 55.75 48.84 0 81.09-25.08 120.26-25.08 39.51 0 71.85 25.08 120.26 25.08 44.93 0 71.74-20.85 71.74-55.75C448 346.76 335.41 224 256 224zm-147.28-12.61c-10.4-34.65-42.44-57.09-71.56-50.13-29.12 6.96-44.29 40.69-33.89 75.34 10.4 34.65 42.44 57.09 71.56 50.13 29.12-6.96 44.29-40.69 33.89-75.34zm84.72-20.78c30.94-8.14 46.42-49.94 34.58-93.36s-46.52-72.01-77.46-63.87-46.42 49.94-34.58 93.36c11.84 43.42 46.53 72.02 77.46 63.87zm281.39-29.34c-29.12-6.96-61.15 15.48-71.56 50.13-10.4 34.65 4.77 68.38 33.89 75.34 29.12 6.96 61.15-15.48 71.56-50.13 10.4-34.65-4.77-68.38-33.89-75.34zm-156.27 29.34c30.94 8.14 65.62-20.45 77.46-63.87 11.84-43.42-3.64-85.21-34.58-93.36s-65.62 20.45-77.46 63.87c-11.84 43.42 3.64 85.22 34.58 93.36z"/></svg></span><span>About</span><!--[--><!--]--></a></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>Search</span></a></div></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><div class="page-content"><!--[--><div class="show-catalog post-wrapper"><div class="article-header post-header" style=""><!----><div class="article-header-content"><div class="article-tags"><!--[--><a href="/tags/lightning/" class="article-tag">lightning</a><a href="/tags/p2p/" class="article-tag">p2p</a><!--]--></div><h1 class="article-title">4-Spanda-LN-P2P-payment-setu-integration</h1><!----><div class="article-icons"><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg><span>Blake Chan</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg><span>2026-02-27</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg><span>32 min</span></div></div></div><!----></div><main class="page post-content"><!--[--><!--]--><div class="theme-gungnir-content"><!--[--><!--]--><div><p>é—ªç”µç½‘ç»œé€‚é… Setu or DAG é“¾ â€” æ”¹é€ é‡æ„æ–‡æ¡£</p><h2 id="_0-overview" tabindex="-1"><a class="header-anchor" href="#_0-overview" aria-hidden="true">#</a> 0. Overview</h2><p>å°† LND é—ªç”µç½‘ç»œæ”¹é€ ä¸ºåŒæ—¶æ”¯æŒÂ <strong>Bitcoin + Setu åŒé“¾</strong>ã€‚Setu æ˜¯åŸºäºå¯¹è±¡è´¦æˆ·æ¨¡å‹çš„ DAG åŒºå—é“¾ï¼Œä½¿ç”¨è‡ªå®šä¹‰ 10 æ“ä½œç è§£é‡Šå™¨ï¼ˆ<code>ProgramTx</code>ï¼‰ä½œä¸ºåˆçº¦è¯­è¨€ï¼Œå¯†ç å­¦åŒæ—¶æ”¯æŒ secp256k1 å’Œ Ed25519ï¼Œé€šé“ä»¥ 32 å­—èŠ‚Â <code>ObjectID</code>Â æ ‡è¯†ã€‚æ”¹é€ ç­–ç•¥ï¼šåœ¨ç°æœ‰ Bitcoin ç±»å‹ä¹‹ä¸Šå¼•å…¥<strong>é“¾æ— å…³æŠ½è±¡å±‚</strong>ï¼ŒBitcoin ä¿ç•™ä¸ºä¸€ä¸ªå®ç°ï¼ŒSetu ä½œä¸ºå¦ä¸€ä¸ªå®ç°æ’å…¥ï¼Œé€šè¿‡Â <code>ChainControl</code>Â åšåŒé“¾è°ƒåº¦ã€‚</p><p>æ ¸å¿ƒæ”¹é€ å·¥ä½œé‡åˆ†å¸ƒï¼š<strong>æ–°å¢æŠ½è±¡å±‚ï¼ˆ40%ï¼‰â†’ Setu åç«¯å®ç°ï¼ˆ30%ï¼‰â†’ ç°æœ‰æ¨¡å—é€‚é…æ¥å£ï¼ˆ20%ï¼‰â†’ Setu é“¾ä¸Šåˆçº¦ï¼ˆ10%ï¼‰</strong>ã€‚</p><hr><h2 id="_1-æµç¨‹äº¤äº’å›¾" tabindex="-1"><a class="header-anchor" href="#_1-æµç¨‹äº¤äº’å›¾" aria-hidden="true">#</a> 1. æµç¨‹äº¤äº’å›¾</h2><p>å¦‚ä¸‹ 7 å¼ å›¾åˆ†åˆ«è¦†ç›–äº†ï¼š</p><ol><li><strong>æ¶æ„æ€»è§ˆ</strong>Â â€” åŒé“¾æŠ½è±¡å±‚åˆ†å±‚ä¸æ¨¡å—å…³ç³»</li><li><strong>é€šé“ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”</strong>Â â€” Bitcoin vs Setu çš„æµç¨‹å·®å¼‚ä¸€ç›®äº†ç„¶</li><li><strong>å¼€é€šé“åºåˆ—</strong>Â â€” è¯¦ç»†çš„åŒæ–¹+é“¾äº¤äº’æ—¶åº</li><li><strong>å¤šè·³ HTLC æ”¯ä»˜</strong>Â â€” æ­£å¸¸æµè½¬ä¸å¼‚å¸¸è¶…æ—¶çš„å®Œæ•´åºåˆ—</li><li><strong>å¼ºåˆ¶å…³é—­ä¸äº‰è®®è§£å†³</strong>Â â€” å«è¿çº¦æƒ©ç½šçš„å®Œæ•´å†³ç­–æµç¨‹</li><li><strong>Scriptâ†’ProgramTx æ˜ å°„</strong>Â â€” æ¯ä¸ª Bitcoin æ“ä½œç å¦‚ä½•ç¿»è¯‘ä¸º Setu 10 æ“ä½œç </li><li><strong>æ”¹é€ é˜¶æ®µä¾èµ–</strong>Â â€” 5 ä¸ª Phase çš„æ‰§è¡Œé¡ºåºä¸ä¾èµ–</li><li><strong>é“¾ä¸Š/é“¾ä¸‹æ•°æ®æµå…¨æ™¯</strong>Â â€” å®Œæ•´çš„é€šé“ç”Ÿå‘½å‘¨æœŸäº¤äº’æ³³é“</li></ol><h3 id="_1-åŒé“¾æŠ½è±¡æ¶æ„æ€»è§ˆ" tabindex="-1"><a class="header-anchor" href="#_1-åŒé“¾æŠ½è±¡æ¶æ„æ€»è§ˆ" aria-hidden="true">#</a> 1. åŒé“¾æŠ½è±¡æ¶æ„æ€»è§ˆ</h3><div class="vuepress-mermaid" id="mermaid_382ee1e5" data-code="graph TB
    subgraph &quot;LND åº”ç”¨å±‚ï¼ˆé“¾æ— å…³ï¼‰&quot;
        RPC[&quot;RPC Server&lt;br/&gt;lnrpc/&quot;]
        Router[&quot;è·¯ç”±å¼•æ“&lt;br/&gt;routing/&quot;]
        Switch[&quot;HTLC Switch&lt;br/&gt;htlcswitch/&quot;]
        Invoice[&quot;å‘ç¥¨ç®¡ç†&lt;br/&gt;invoices/&quot;]
        Funding[&quot;èµ„é‡‘ç®¡ç†å™¨&lt;br/&gt;funding/&quot;]
        ChanSM[&quot;é€šé“çŠ¶æ€æœº&lt;br/&gt;lnwallet/channel.go&quot;]
        ContractCourt[&quot;åˆçº¦è£å†³&lt;br/&gt;contractcourt/&quot;]
        Graph[&quot;å›¾æ„å»º&lt;br/&gt;graph/&quot;]
        Discovery[&quot;Gossip å‘ç°&lt;br/&gt;discovery/&quot;]
    end

    subgraph CT[&quot;chaintype/ æŠ½è±¡å±‚&quot;]
        CT_Types[&quot;é“¾æ— å…³ç±»å‹&lt;br/&gt;TxID Â· ChannelPoint&lt;br/&gt;Amount Â· FeeRate&lt;br/&gt;PubKey Â· Signature&quot;]
        CT_Iface[&quot;ç»Ÿä¸€æ¥å£&lt;br/&gt;ChainNotifier&lt;br/&gt;BlockChainIO&lt;br/&gt;Signer&lt;br/&gt;WalletController&quot;]
        CC[&quot;ChainControl&lt;br/&gt;é“¾è°ƒåº¦å™¨&quot;]
    end

    subgraph &quot;Bitcoin åç«¯&quot;
        BTC_Notify[&quot;bitcoindnotify/&lt;br/&gt;btcdnotify/&lt;br/&gt;neutrinonotify/&quot;]
        BTC_Wallet[&quot;btcwallet/&lt;br/&gt;WalletController å®ç°&quot;]
        BTC_Script[&quot;input/script_utils.go&lt;br/&gt;Bitcoin Script æ„å»º&quot;]
        BTC_Fee[&quot;chainfee/&lt;br/&gt;SatPerKWeight&quot;]
        BTC_Chain[&quot;Bitcoin åŒºå—é“¾&lt;br/&gt;UTXO æ¨¡å‹&quot;]
    end

    subgraph &quot;Setu åç«¯ï¼ˆæ–°å¢ï¼‰&quot;
        SETU_Notify[&quot;setunotify/&lt;br/&gt;å¯¹è±¡äº‹ä»¶è®¢é˜…&quot;]
        SETU_Wallet[&quot;setuwallet/&lt;br/&gt;è´¦æˆ·ä½™é¢æ“ä½œ&quot;]
        SETU_Program[&quot;input/setu_programs.go&lt;br/&gt;ProgramTx åˆçº¦æ„å»º&quot;]
        SETU_Fee[&quot;chainfee/setu_estimator&lt;br/&gt;GasPrice&quot;]
        SETU_Chain[&quot;Setu DAG é“¾&lt;br/&gt;å¯¹è±¡è´¦æˆ·æ¨¡å‹&quot;]
    end

    RPC -- toCC --&gt; CC
    Router --&gt; Switch
    Switch --&gt; ChanSM
    Funding -- toCC --&gt; CC
    ChanSM -- toCC --&gt; CC
    ContractCourt -- toCC --&gt; CC
    Graph -- toCC --&gt; CC
    Discovery -- toCC --&gt; CC

    CC --&gt;|&quot;chain=bitcoin&quot;| BTC_Notify
    CC --&gt;|&quot;chain=bitcoin&quot;| BTC_Wallet
    CC --&gt;|&quot;chain=bitcoin&quot;| BTC_Script
    CC --&gt;|&quot;chain=bitcoin&quot;| BTC_Fee

    CC --&gt;|&quot;chain=setu&quot;| SETU_Notify
    CC --&gt;|&quot;chain=setu&quot;| SETU_Wallet
    CC --&gt;|&quot;chain=setu&quot;| SETU_Program
    CC --&gt;|&quot;chain=setu&quot;| SETU_Fee

    BTC_Notify --&gt; BTC_Chain
    BTC_Wallet --&gt; BTC_Chain
    SETU_Notify --&gt; SETU_Chain
    SETU_Wallet --&gt; SETU_Chain

    CT_Types -.-&gt;|&quot;ç±»å‹å®šä¹‰&quot;| CT_Iface
    CT_Iface -.-&gt;|&quot;ç»„åˆ&quot;| CC
    
    %% å¼ºåˆ¶å‚ç›´å¸ƒå±€çš„è¾¹ï¼ˆè®¾ä¸ºä¸å¯è§ï¼‰
    ChanSM --- CT_Types

    style CT_Types fill:#4a9eff,color:#fff
    style CT_Iface fill:#4a9eff,color:#fff
    style CC fill:#4a9eff,color:#fff
    style SETU_Notify fill:#2ecc71,color:#fff
    style SETU_Wallet fill:#2ecc71,color:#fff
    style SETU_Program fill:#2ecc71,color:#fff
    style SETU_Fee fill:#2ecc71,color:#fff
    style SETU_Chain fill:#2ecc71,color:#fff
    style BTC_Chain fill:#f39c12,color:#fff
    
    %% éšè—æœ€åä¸¤æ¡è¾¹ï¼ˆå¼ºåˆ¶å¸ƒå±€è¾¹ï¼‰
    linkStyle 22 stroke-width:0, stroke:transparent;"></div><h3 id="_2-é€šé“ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”-bitcoin-vs-setu" tabindex="-1"><a class="header-anchor" href="#_2-é€šé“ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”-bitcoin-vs-setu" aria-hidden="true">#</a> 2. é€šé“ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”ï¼ˆBitcoin vs Setuï¼‰</h3><ul><li>å›¾1ï¼šBitcoin é—ªç”µç½‘ç»œé€šé“ç”Ÿå‘½å‘¨æœŸ</li></ul><div class="vuepress-mermaid" id="mermaid_382ee205" data-code="flowchart LR
    B1[&quot;é€‰æ‹© UTXO&lt;br/&gt;coin selection&quot;] --&gt; B2[&quot;æ„å»º 2-of-2&lt;br/&gt;å¤šç­¾èµ„é‡‘ TX&quot;]
    B2 --&gt; B3[&quot;å¹¿æ’­ TX&lt;br/&gt;ç­‰å¾… 3-6 æ¬¡ç¡®è®¤&lt;br/&gt;â± 30~60 min&quot;]
    B3 --&gt; B4[&quot;ç”Ÿæˆ ShortChanID&lt;br/&gt;block:tx:output&quot;]
    B4 --&gt; B5[&quot;äº¤æ¢æ‰¿è¯ºäº¤æ˜“&lt;br/&gt;wire.MsgTx ç­¾å&quot;]
    B5 --&gt; B6[&quot;HTLC æ›´æ–°&lt;br/&gt;Script æ¡ä»¶åˆ†æ”¯&quot;]
    B6 --&gt; B7{&quot;å…³é—­æ–¹å¼&quot;}
    B7 --&gt;|åä½œ| B8[&quot;æ„å»ºå…³é—­ TX&lt;br/&gt;åŒæ–¹ç­¾åå¹¿æ’­&quot;]
    B7 --&gt;|å¼ºåˆ¶| B9[&quot;å¹¿æ’­æ‰¿è¯º TX&lt;br/&gt;CSV å»¶è¿Ÿç­‰å¾…&quot;]
    B9 --&gt; B10[&quot;Sweep UTXO&lt;br/&gt;æ‰«å›é’±åŒ…&quot;]
    B7 --&gt;|è¿çº¦| B11[&quot;æ„å»ºæ­£ä¹‰ TX&lt;br/&gt;æ’¤é”€å¯†é’¥èŠ±è´¹&quot;]

    style B3 fill:#e74c3c,color:#fff
    style B10 fill:#e67e22,color:#fff"></div><ul><li>å›¾2ï¼šSetu é—ªç”µç½‘ç»œé€šé“ç”Ÿå‘½å‘¨æœŸ</li></ul><div class="vuepress-mermaid" id="mermaid_382ee222" data-code="flowchart LR
    S1[&quot;æŸ¥è¯¢ä½™é¢&lt;br/&gt;balance check&quot;] --&gt; S2[&quot;åˆ›å»º Channel&lt;br/&gt;Object å…±äº«å¯¹è±¡&quot;]
    S2 --&gt; S3[&quot;DAG æœ€ç»ˆç¡®å®š&lt;br/&gt;â± &lt; 1 sec&quot;]
    S3 --&gt; S4[&quot;ObjectID&lt;br/&gt;å³ä¸ºé€šé“æ ‡è¯†&quot;]
    S4 --&gt; S5[&quot;ç­¾åçŠ¶æ€æ›´æ–°&lt;br/&gt;state_num é€’å¢&quot;]
    S5 --&gt; S6[&quot;HTLC æ›´æ–°&lt;br/&gt;ProgramTx åˆçº¦&quot;]
    S6 --&gt; S7{&quot;å…³é—­æ–¹å¼&quot;}
    S7 --&gt;|åä½œ| S8[&quot;è°ƒç”¨ close()&lt;br/&gt;ä½™é¢åˆ†é…å›è´¦æˆ·&quot;]
    S7 --&gt;|å¼ºåˆ¶| S9[&quot;è°ƒç”¨ force_close()&lt;br/&gt;epoch å»¶è¿Ÿç­‰å¾…&quot;]
    S9 --&gt; S10[&quot;è°ƒç”¨ withdraw()&lt;br/&gt;ä½™é¢å›è´¦æˆ·&quot;]
    S7 --&gt;|è¿çº¦| S11[&quot;è°ƒç”¨ penalize()&lt;br/&gt;æ’¤é”€å¯†é’¥+æ—§çŠ¶æ€&quot;]

    style S3 fill:#2ecc71,color:#fff
    style S10 fill:#2ecc71,color:#fff"></div><h3 id="_3-å¼€é€šé“åºåˆ—äº¤äº’å›¾-setu-é€‚é…" tabindex="-1"><a class="header-anchor" href="#_3-å¼€é€šé“åºåˆ—äº¤äº’å›¾-setu-é€‚é…" aria-hidden="true">#</a> 3. å¼€é€šé“åºåˆ—äº¤äº’å›¾ï¼ˆSetu é€‚é…ï¼‰</h3><div class="vuepress-mermaid" id="mermaid_382ee226" data-code="sequenceDiagram
    participant Alice as Alice (å‘èµ·æ–¹)
    participant Bob as Bob (æ¥æ”¶æ–¹)
    participant Setu as Setu DAG é“¾
    participant LND_A as Alice LND
    participant LND_B as Bob LND

    Note over Alice, Bob: â•â•â• é€šé“å¼€è®¾åè®® â•â•â•

    Alice-&gt;&gt;LND_A: openchannel(bob_pubkey, amount)
    LND_A-&gt;&gt;LND_A: æ£€æŸ¥ä½™é¢ â‰¥ amount + gas
    LND_A-&gt;&gt;LND_B: MsgOpenChannel&lt;br/&gt;{chain_hash, amount, push_amt,&lt;br/&gt;channel_flags, funding_key}
    
    LND_B-&gt;&gt;LND_B: éªŒè¯å‚æ•°&lt;br/&gt;æ£€æŸ¥ä½™é¢(è‹¥æœ‰ push)
    LND_B-&gt;&gt;LND_A: MsgAcceptChannel&lt;br/&gt;{min_depth=1, funding_key,&lt;br/&gt;revocation_basepoint, ...}

    Note over LND_A, Setu: â•â•â• Setu é“¾ä¸Šæ“ä½œ â•â•â•

    LND_A-&gt;&gt;LND_A: æ„å»º ProgramTx:&lt;br/&gt;åˆ›å»º Channel Object&lt;br/&gt;{local_key, remote_key,&lt;br/&gt;local_balance, remote_balance,&lt;br/&gt;state_num=0, to_self_delay}
    
    LND_A-&gt;&gt;Setu: æäº¤ ProgramTx&lt;br/&gt;(åˆ›å»ºå…±äº«å¯¹è±¡)
    Setu--&gt;&gt;Setu: DAG å…±è¯†æ‰§è¡Œ&lt;br/&gt;åˆ›å»º Channel Object
    Setu--&gt;&gt;LND_A: æœ€ç»ˆç¡®å®šé€šçŸ¥&lt;br/&gt;ObjectID = 0xABC...

    LND_A-&gt;&gt;LND_B: MsgFundingCreated&lt;br/&gt;{object_id, initial_commitment_sig}

    LND_B-&gt;&gt;LND_B: éªŒè¯ Object å­˜åœ¨äºé“¾ä¸Š&lt;br/&gt;éªŒè¯ç­¾å
    LND_B-&gt;&gt;LND_A: MsgFundingSigned&lt;br/&gt;{commitment_sig}

    Note over LND_A, Setu: â•â•â• ç­‰å¾…æœ€ç»ˆç¡®å®šï¼ˆæå¿«ï¼‰ â•â•â•

    Setu--&gt;&gt;LND_A: Object æœ€ç»ˆç¡®å®š âœ“
    Setu--&gt;&gt;LND_B: Object æœ€ç»ˆç¡®å®š âœ“

    LND_A-&gt;&gt;LND_B: MsgChannelReady&lt;br/&gt;{channel_id = ObjectID}
    LND_B-&gt;&gt;LND_A: MsgChannelReady&lt;br/&gt;{channel_id = ObjectID}

    Note over Alice, Bob: âœ… é€šé“å°±ç»ªï¼Œå¯å‘é€æ”¯ä»˜&lt;br/&gt;ShortChanID = ObjectID

    rect rgb(200, 235, 200)
        Note over Alice, Setu: å¯¹æ¯” Bitcoin: æ­¤æµç¨‹ä» ~60min ç¼©çŸ­åˆ° ~2sec
    end"></div><h3 id="_4-å¤šè·³-htlc-æ”¯ä»˜åºåˆ—å›¾" tabindex="-1"><a class="header-anchor" href="#_4-å¤šè·³-htlc-æ”¯ä»˜åºåˆ—å›¾" aria-hidden="true">#</a> 4. å¤šè·³ HTLC æ”¯ä»˜åºåˆ—å›¾</h3><div class="vuepress-mermaid" id="mermaid_382ee23f" data-code="sequenceDiagram
    participant A as Alice&lt;br/&gt;(ä»˜æ¬¾æ–¹)
    participant N1 as Node1&lt;br/&gt;(ä¸­ç»§)
    participant B as Bob&lt;br/&gt;(æ”¶æ¬¾æ–¹)
    participant Setu as Setu é“¾&lt;br/&gt;(ä»…äº‰è®®æ—¶)

    Note over A, B: â•â•â• å‘ç¥¨åˆ›å»º â•â•â•
    B-&gt;&gt;B: ç”Ÿæˆ preimage R&lt;br/&gt;payment_hash H = SHA256(R)
    B-&gt;&gt;A: Invoice (lnst1...)&lt;br/&gt;{H, amount, expiry_epoch}

    Note over A, B: â•â•â• æ´‹è‘±è·¯ç”±æ„å»º â•â•â•
    A-&gt;&gt;A: è·¯å¾„æŸ¥æ‰¾: A â†’ N1 â†’ B&lt;br/&gt;æ„å»ºæ´‹è‘±åŒ… (Sphinx)

    Note over A, B: â•â•â• HTLC è½¬å‘é“¾ â•â•â•
    
    rect rgb(40, 50, 70)  # æ›¿æ¢ä¸ºæš—è‰²ä¸»é¢˜é€‚é…çš„æ·±è“
        A-&gt;&gt;N1: update_add_htlc&lt;br/&gt;{H, amt=1010, expiry=epoch+200}
        A-&gt;&gt;N1: commitment_signed
        N1-&gt;&gt;A: revoke_and_ack
        N1-&gt;&gt;A: commitment_signed
        A-&gt;&gt;N1: revoke_and_ack
        Note over A, N1: Aâ†”N1 é€šé“çŠ¶æ€æ›´æ–°&lt;br/&gt;(é“¾ä¸‹ç­¾åäº¤æ¢ï¼Œæ— é“¾ä¸Šæ“ä½œ)
    end

    rect rgb(40, 50, 70)  # æ›¿æ¢ä¸ºæš—è‰²ä¸»é¢˜é€‚é…çš„æ·±è“
        N1-&gt;&gt;B: update_add_htlc&lt;br/&gt;{H, amt=1000, expiry=epoch+100}
        N1-&gt;&gt;B: commitment_signed
        B-&gt;&gt;N1: revoke_and_ack
        B-&gt;&gt;N1: commitment_signed
        N1-&gt;&gt;B: revoke_and_ack
        Note over N1, B: N1â†”B é€šé“çŠ¶æ€æ›´æ–°&lt;br/&gt;(é“¾ä¸‹ç­¾åäº¤æ¢ï¼Œæ— é“¾ä¸Šæ“ä½œ)
    end

    Note over A, B: â•â•â• åŸåƒæ­ç¤ºï¼ˆåå‘ï¼‰ â•â•â•

    rect rgb(30, 60, 30)  # æ›¿æ¢ä¸ºæš—è‰²ä¸»é¢˜é€‚é…çš„æ·±ç»¿
        B-&gt;&gt;N1: update_fulfill_htlc&lt;br/&gt;{preimage=R}
        B-&gt;&gt;N1: commitment_signed
        N1-&gt;&gt;B: revoke_and_ack
        Note over N1, B: N1 è·å¾— Rï¼Œæ‰£å‡ B çš„ HTLC
    end

    rect rgb(30, 60, 30)  # æ›¿æ¢ä¸ºæš—è‰²ä¸»é¢˜é€‚é…çš„æ·±ç»¿
        N1-&gt;&gt;A: update_fulfill_htlc&lt;br/&gt;{preimage=R}
        N1-&gt;&gt;A: commitment_signed
        A-&gt;&gt;N1: revoke_and_ack
        Note over A, N1: A ç¡®è®¤æ”¯ä»˜å®Œæˆ
    end

    Note over A, B: âœ… æ”¯ä»˜å®Œæˆ&lt;br/&gt;å…¨ç¨‹é“¾ä¸‹ï¼Œé›¶ gas æ¶ˆè€—

    Note over A, Setu: â•â•â• å¼‚å¸¸æƒ…å†µï¼šHTLC è¶…æ—¶ â•â•â•
    
    rect rgb(70, 30, 30)  # æ›¿æ¢ä¸ºæš—è‰²ä¸»é¢˜é€‚é…çš„æ·±çº¢
        alt B ä¸æ­ç¤ºåŸåƒä¸” expiry åˆ°è¾¾
            N1-&gt;&gt;Setu: è°ƒç”¨ htlc_timeout()&lt;br/&gt;ProgramTx: Cmp(current_epoch â‰¥ expiry)
            Setu--&gt;&gt;N1: HTLC é‡‘é¢è¿”è¿˜ N1
            N1-&gt;&gt;A: update_fail_htlc
        end
    end"></div><h3 id="_5-å¼ºåˆ¶å…³é—­ä¸äº‰è®®è§£å†³æµç¨‹å›¾" tabindex="-1"><a class="header-anchor" href="#_5-å¼ºåˆ¶å…³é—­ä¸äº‰è®®è§£å†³æµç¨‹å›¾" aria-hidden="true">#</a> 5. å¼ºåˆ¶å…³é—­ä¸äº‰è®®è§£å†³æµç¨‹å›¾</h3><div class="vuepress-mermaid" id="mermaid_382ee243" data-code="flowchart TB
    Start[&quot;å•æ–¹é¢å…³é—­è§¦å‘&lt;br/&gt;(å¯¹ç«¯æ‰çº¿/ä¸å“åº”)&quot;]
    
    Start --&gt; Publish[&quot;æäº¤æœ€æ–°æ‰¿è¯ºçŠ¶æ€åˆ° Setu&lt;br/&gt;è°ƒç”¨ Channel Object çš„&lt;br/&gt;force_close(state_num, sig)&quot;]

    Publish --&gt; SetuExec[&quot;Setu DAG æ‰§è¡Œ ProgramTx&quot;]
    SetuExec --&gt; Validate{&quot;éªŒè¯ç­¾å +&lt;br/&gt;state_num â‰¥ é“¾ä¸Šè®°å½•?&quot;}
    
    Validate --&gt;|&quot;å¤±è´¥&quot;| Reject[&quot;äº¤æ˜“å¤±è´¥&lt;br/&gt;çŠ¶æ€ä¸å˜&quot;]
    Validate --&gt;|&quot;æˆåŠŸ&quot;| Freeze[&quot;Channel Object&lt;br/&gt;è¿›å…¥ CLOSING çŠ¶æ€&lt;br/&gt;è®°å½• close_epoch&quot;]
    
    Freeze --&gt; Parallel[&quot;å¹¶è¡Œå¤„ç†&quot;]
    
    Parallel --&gt; LocalBalance[&quot;æœ¬åœ°ä½™é¢å¤„ç†&quot;]
    Parallel --&gt; RemoteBalance[&quot;å¯¹ç«¯ä½™é¢å¤„ç†&quot;]
    Parallel --&gt; HTLCs[&quot;æ´»è·ƒ HTLC å¤„ç†&quot;]

    subgraph &quot;æœ¬åœ°ä½™é¢ï¼ˆto_self_delay ä¿æŠ¤ï¼‰&quot;
        LocalBalance --&gt; WaitCSV{&quot;ç­‰å¾…ç›¸å¯¹å»¶è¿Ÿ&lt;br/&gt;current_epoch â‰¥&lt;br/&gt;close_epoch + to_self_delay?&quot;}
        WaitCSV --&gt;|&quot;æœªåˆ°æœŸ&quot;| WaitCSV
        WaitCSV --&gt;|&quot;åˆ°æœŸ&quot;| ClaimLocal[&quot;è°ƒç”¨ claim_local()&lt;br/&gt;ä½™é¢è½¬å…¥æœ¬åœ°è´¦æˆ·&quot;]
    end

    subgraph &quot;å¯¹ç«¯ä½™é¢&quot;
        RemoteBalance --&gt; ClaimRemote[&quot;å¯¹ç«¯å¯ç«‹å³è°ƒç”¨&lt;br/&gt;claim_remote()&lt;br/&gt;ï¼ˆæ— å»¶è¿Ÿï¼‰&quot;]
    end

    subgraph &quot;HTLC è§£æ&quot;
        HTLCs --&gt; HTLCType{&quot;HTLC æ–¹å‘?&quot;}
        HTLCType --&gt;|&quot;å‡ºç«™ HTLC&quot;| TimeoutPath[&quot;ç­‰å¾… CLTV åˆ°æœŸ&lt;br/&gt;current_epoch â‰¥ htlc.expiry&quot;]
        TimeoutPath --&gt; ClaimTimeout[&quot;è°ƒç”¨ htlc_timeout()&lt;br/&gt;èµ„é‡‘è¿”è¿˜&quot;]
        
        HTLCType --&gt;|&quot;å…¥ç«™ HTLC&quot;| PreimagePath[&quot;æŒæœ‰åŸåƒ?&quot;]
        PreimagePath --&gt;|&quot;æ˜¯&quot;| ClaimSuccess[&quot;è°ƒç”¨ htlc_success(preimage)&lt;br/&gt;ProgramTx éªŒè¯ SHA256&quot;]
        PreimagePath --&gt;|&quot;å¦&quot;| WaitExpiry[&quot;ç­‰å¾…è¶…æ—¶å&lt;br/&gt;å¯¹ç«¯å–å›&quot;]
    end

    subgraph &quot;è¿çº¦æ£€æµ‹ (Breach)&quot;
        Freeze --&gt; Monitor[&quot;ChainWatcher ç›‘æ§&lt;br/&gt;Object çŠ¶æ€å˜æ›´&quot;]
        Monitor --&gt; OldState{&quot;æäº¤çš„ state_num&lt;br/&gt;&lt; æœ¬åœ°å·²çŸ¥æœ€æ–°?&quot;}
        OldState --&gt;|&quot;æ˜¯ = è¿çº¦!&quot;| Penalize[&quot;è°ƒç”¨ penalize()&lt;br/&gt;æäº¤æ’¤é”€å¯†é’¥ +&lt;br/&gt;è¯æ˜æ—§çŠ¶æ€&quot;]
        Penalize --&gt; SeizeAll[&quot;å…¨éƒ¨ä½™é¢&lt;br/&gt;åˆ¤å½’è¯šå®æ–¹&quot;]
        OldState --&gt;|&quot;å¦&quot;| NoBreach[&quot;æ­£å¸¸æµç¨‹&quot;]
    end

    style Freeze fill:#e74c3c,color:#fff
    style ClaimLocal fill:#2ecc71,color:#fff
    style ClaimRemote fill:#2ecc71,color:#fff
    style ClaimSuccess fill:#2ecc71,color:#fff
    style ClaimTimeout fill:#f39c12,color:#fff
    style SeizeAll fill:#9b59b6,color:#fff
    style Reject fill:#95a5a6,color:#fff"></div><h3 id="_6-setu-programtx-åˆçº¦é€»è¾‘æ˜ å°„å›¾" tabindex="-1"><a class="header-anchor" href="#_6-setu-programtx-åˆçº¦é€»è¾‘æ˜ å°„å›¾" aria-hidden="true">#</a> 6. Setu ProgramTx åˆçº¦é€»è¾‘æ˜ å°„å›¾</h3><div class="vuepress-mermaid" id="mermaid_64a570ea" data-code="graph TB
    subgraph &quot;Bitcoin Scriptï¼ˆç°æœ‰ï¼‰&quot;
        BS1[&quot;OP_2 &amp;lt;key1&amp;gt; &amp;lt;key2&amp;gt; OP_2&lt;br/&gt;OP_CHECKMULTISIG&quot;]
        BS2[&quot;OP_HASH160 &amp;lt;hash&amp;gt; OP_EQUAL&lt;br/&gt;OP_CHECKSIG&quot;]
        BS3[&quot;&amp;lt;delay&amp;gt; OP_CSV&lt;br/&gt;OP_DROP OP_CHECKSIG&quot;]
        BS4[&quot;&amp;lt;expiry&amp;gt; OP_CLTV&lt;br/&gt;OP_DROP OP_CHECKSIG&quot;]
        BS5[&quot;OP_IF&lt;br/&gt;  revocation_path&lt;br/&gt;OP_ELSE&lt;br/&gt;  normal_path&lt;br/&gt;OP_ENDIF&quot;]
    end

    subgraph &quot;Setu ProgramTx æ“ä½œç ï¼ˆæ–°å¢ï¼‰&quot;
        SP1[&quot;Const(key1), Const(key2)&lt;br/&gt;LoadInput(sig1), LoadInput(sig2)&lt;br/&gt;BinOp(VERIFY_SIG) Ã— 2&lt;br/&gt;BinOp(AND), JumpIf(fail)&quot;]
        SP2[&quot;LoadInput(preimage)&lt;br/&gt;BinOp(SHA256)&lt;br/&gt;Const(expected_hash)&lt;br/&gt;Cmp(EQ), JumpIf(fail)&quot;]
        SP3[&quot;LoadInput(current_epoch)&lt;br/&gt;Const(creation_epoch + delay)&lt;br/&gt;Cmp(GE), JumpIf(fail)&quot;]
        SP4[&quot;LoadInput(current_epoch)&lt;br/&gt;Const(expiry_epoch)&lt;br/&gt;Cmp(GE), JumpIf(fail)&quot;]
        SP5[&quot;LoadInput(which_path)&lt;br/&gt;Const(REVOKE), Cmp(EQ)&lt;br/&gt;JumpIf(revoke_entry)&lt;br/&gt;Jump(normal_entry)&quot;]
    end

    BS1 --&gt;|&quot;2-of-2 å¤šç­¾&quot;| SP1
    BS2 --&gt;|&quot;å“ˆå¸Œé” HTLC&quot;| SP2
    BS3 --&gt;|&quot;ç›¸å¯¹æ—¶é—´é” CSV&quot;| SP3
    BS4 --&gt;|&quot;ç»å¯¹æ—¶é—´é” CLTV&quot;| SP4
    BS5 --&gt;|&quot;æ¡ä»¶åˆ†æ”¯&quot;| SP5

    subgraph &quot;Channel Object çŠ¶æ€å­—æ®µ&quot;
        CO[&quot;Channel Object&lt;br/&gt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&lt;br/&gt;object_id: [32]byte&lt;br/&gt;local_balance: u64&lt;br/&gt;remote_balance: u64&lt;br/&gt;local_key: [33]byte&lt;br/&gt;remote_key: [33]byte&lt;br/&gt;revocation_key: [33]byte&lt;br/&gt;state_num: u64&lt;br/&gt;to_self_delay: u64&lt;br/&gt;status: OPEN|CLOSING|CLOSED&lt;br/&gt;close_epoch: u64&lt;br/&gt;htlcs: []HTLC&quot;]
    end

    SP1 --&gt; CO
    SP2 --&gt; CO
    SP3 --&gt; CO
    SP4 --&gt; CO
    SP5 --&gt; CO

    style BS1 fill:#f39c12,color:#fff
    style BS2 fill:#f39c12,color:#fff
    style BS3 fill:#f39c12,color:#fff
    style BS4 fill:#f39c12,color:#fff
    style BS5 fill:#f39c12,color:#fff
    style SP1 fill:#2ecc71,color:#fff
    style SP2 fill:#2ecc71,color:#fff
    style SP3 fill:#2ecc71,color:#fff
    style SP4 fill:#2ecc71,color:#fff
    style SP5 fill:#2ecc71,color:#fff
    style CO fill:#3498db,color:#fff"></div><h3 id="_7-æ¨¡å—æ”¹é€ ä¼˜å…ˆçº§ä¸ä¾èµ–å…³ç³»" tabindex="-1"><a class="header-anchor" href="#_7-æ¨¡å—æ”¹é€ ä¼˜å…ˆçº§ä¸ä¾èµ–å…³ç³»" aria-hidden="true">#</a> 7. æ¨¡å—æ”¹é€ ä¼˜å…ˆçº§ä¸ä¾èµ–å…³ç³»</h3><div class="vuepress-mermaid" id="mermaid_64a570e2" data-code="graph LR
    subgraph &quot;Phase 1: åŸºç¡€å±‚&quot;
        P1A[&quot;chaintype/&lt;br/&gt;é“¾æ— å…³ç±»å‹å®šä¹‰&quot;]
        P1B[&quot;chainreg/setu_params&lt;br/&gt;ç½‘ç»œå‚æ•°&quot;]
        P1C[&quot;keychain/ æ‰©å±•&lt;br/&gt;Ed25519 + secp256k1&quot;]
    end

    subgraph &quot;Phase 2: é“¾åç«¯&quot;
        P2A[&quot;chainntnfs/setunotify/&lt;br/&gt;äº‹ä»¶è®¢é˜…&quot;]
        P2B[&quot;lnwallet/setuwallet/&lt;br/&gt;é’±åŒ…å®ç°&quot;]
        P2C[&quot;input/setu_programs.go&lt;br/&gt;åˆçº¦æ„å»º&quot;]
        P2D[&quot;chainfee/setu_estimator&lt;br/&gt;Gas ä¼°ç®—&quot;]
    end

    subgraph &quot;Phase 3: æ ¸å¿ƒé€‚é…&quot;
        P3A[&quot;lnwallet/channel.go&lt;br/&gt;çŠ¶æ€æœºæŠ½è±¡&quot;]
        P3B[&quot;funding/manager.go&lt;br/&gt;å¼€é€šé“æµç¨‹&quot;]
        P3C[&quot;channeldb/&lt;br/&gt;Schema é€‚é…&quot;]
        P3D[&quot;lnwire/&lt;br/&gt;ChannelID / SCID&quot;]
    end

    subgraph &quot;Phase 4: ä¸Šå±‚é€‚é…&quot;
        P4A[&quot;contractcourt/&lt;br/&gt;äº‰è®®è§£å†³&quot;]
        P4B[&quot;sweep/&lt;br/&gt;ä½™é¢æå–&quot;]
        P4C[&quot;graph/ + discovery/&lt;br/&gt;é€šé“éªŒè¯&quot;]
        P4D[&quot;rpcserver.go&lt;br/&gt;RPC å±‚&quot;]
    end

    subgraph &quot;Phase 5: é›†æˆ&quot;
        P5A[&quot;config.go&lt;br/&gt;é…ç½®é›†æˆ&quot;]
        P5B[&quot;server.go&lt;br/&gt;å¯åŠ¨æµç¨‹&quot;]
        P5C[&quot;zpay32/&lt;br/&gt;å‘ç¥¨ç¼–ç &quot;]
        P5D[&quot;itest/&lt;br/&gt;é›†æˆæµ‹è¯•&quot;]
    end

    P1A --&gt; P2A &amp; P2B &amp; P2C &amp; P2D
    P1B --&gt; P2A &amp; P2B
    P1C --&gt; P2B &amp; P2C

    P2A --&gt; P3A &amp; P3B
    P2B --&gt; P3A &amp; P3B
    P2C --&gt; P3A
    P2D --&gt; P3B

    P3A --&gt; P4A &amp; P4B
    P3B --&gt; P4C
    P3C --&gt; P3A &amp; P3B
    P3D --&gt; P3B &amp; P4C

    P4A &amp; P4B &amp; P4C &amp; P4D --&gt; P5A
    P5A --&gt; P5B --&gt; P5D
    P4D --&gt; P5C

    style P1A fill:#e74c3c,color:#fff
    style P1B fill:#e74c3c,color:#fff
    style P1C fill:#e74c3c,color:#fff
    style P2A fill:#e67e22,color:#fff
    style P2B fill:#e67e22,color:#fff
    style P2C fill:#e67e22,color:#fff
    style P2D fill:#e67e22,color:#fff
    style P3A fill:#f1c40f,color:#333
    style P3B fill:#f1c40f,color:#333
    style P3C fill:#f1c40f,color:#333
    style P3D fill:#f1c40f,color:#333
    style P4A fill:#2ecc71,color:#fff
    style P4B fill:#2ecc71,color:#fff
    style P4C fill:#2ecc71,color:#fff
    style P4D fill:#2ecc71,color:#fff
    style P5A fill:#3498db,color:#fff
    style P5B fill:#3498db,color:#fff
    style P5C fill:#3498db,color:#fff
    style P5D fill:#3498db,color:#fff"></div><h3 id="_8-æ•°æ®æµ-é“¾ä¸Š-vs-é“¾ä¸‹äº¤äº’å…¨æ™¯" tabindex="-1"><a class="header-anchor" href="#_8-æ•°æ®æµ-é“¾ä¸Š-vs-é“¾ä¸‹äº¤äº’å…¨æ™¯" aria-hidden="true">#</a> 8. æ•°æ®æµï¼šé“¾ä¸Š vs é“¾ä¸‹äº¤äº’å…¨æ™¯</h3><div class="vuepress-mermaid" id="mermaid_64a570da" data-code="sequenceDiagram
    box rgb(230,240,255) é“¾ä¸‹ï¼ˆLightning Protocolï¼‰
        participant Alice
        participant Bob
    end
    box rgb(255,240,220) é“¾ä¸Šï¼ˆSetu DAGï¼‰
        participant SetuChain as Setu Chain
        participant ChanObj as Channel Object
    end

    Note over Alice, ChanObj: â•â•â•â•â•â• Phase 1: é€šé“å»ºç«‹ â•â•â•â•â•â•

    Alice-&gt;&gt;SetuChain: ProgramTx: create_channel&lt;br/&gt;{keys, balances, delay}
    SetuChain-&gt;&gt;ChanObj: åˆ›å»º Shared Object&lt;br/&gt;state_num=0, status=OPEN
    SetuChain--&gt;&gt;Alice: ObjectID ç¡®è®¤
    SetuChain--&gt;&gt;Bob: ObjectID ç¡®è®¤

    Note over Alice, ChanObj: â•â•â•â•â•â• Phase 2: é“¾ä¸‹æ”¯ä»˜ï¼ˆæ ¸å¿ƒå¾ªç¯ï¼‰ â•â•â•â•â•â•

    loop æ¯æ¬¡æ”¯ä»˜/è½¬å‘
        Alice-&gt;&gt;Bob: update_add_htlc {hash, amt, expiry}
        Alice-&gt;&gt;Bob: commitment_signed {sig_for_state_N+1}
        Bob-&gt;&gt;Alice: revoke_and_ack {revocation_key_N}
        Bob-&gt;&gt;Alice: commitment_signed {sig_for_state_N+1}
        Alice-&gt;&gt;Bob: revoke_and_ack {revocation_key_N}
        Note over Alice, Bob: åŒæ–¹æœ¬åœ°æ›´æ–°çŠ¶æ€&lt;br/&gt;state_num++ (æ— é“¾ä¸Šäº¤äº’!)
    end

    Note over Alice, Bob: ğŸ’¡ æ­£å¸¸è¿è¡ŒæœŸé—´&lt;br/&gt;é›¶é“¾ä¸Šäº¤æ˜“ï¼Œé›¶ Gas

    Note over Alice, ChanObj: â•â•â•â•â•â• Phase 3a: åä½œå…³é—­ â•â•â•â•â•â•

    Alice-&gt;&gt;Bob: shutdown
    Bob-&gt;&gt;Alice: shutdown
    Alice-&gt;&gt;Bob: closing_signed {final_balances}
    Bob-&gt;&gt;Alice: closing_signed {final_balances}
    
    Alice-&gt;&gt;SetuChain: ProgramTx: cooperative_close&lt;br/&gt;{both_sigs, final_balances}
    SetuChain-&gt;&gt;ChanObj: éªŒè¯åŒç­¾å&lt;br/&gt;åˆ†é…ä½™é¢åˆ°å„è‡ªè´¦æˆ·
    SetuChain-&gt;&gt;ChanObj: é”€æ¯ Object â†’ status=CLOSED

    Note over Alice, ChanObj: â•â•â•â•â•â• Phase 3b: å¼ºåˆ¶å…³é—­ï¼ˆæ›¿ä»£è·¯å¾„ï¼‰ â•â•â•â•â•â•

    rect rgb(255, 235, 235)
        Alice-&gt;&gt;SetuChain: ProgramTx: force_close&lt;br/&gt;{state_num, commitment_sig}
        SetuChain-&gt;&gt;ChanObj: status â†’ CLOSING&lt;br/&gt;close_epoch = current_epoch
        
        Note over Bob, ChanObj: Bob æœ‰ to_self_delay ä¸ª epoch&lt;br/&gt;æ£€æµ‹æ˜¯å¦ä¸ºæ—§çŠ¶æ€

        alt Bob å‘ç°æ˜¯æ—§çŠ¶æ€ï¼ˆè¿çº¦!ï¼‰
            Bob-&gt;&gt;SetuChain: ProgramTx: penalize&lt;br/&gt;{revocation_key, proof}
            SetuChain-&gt;&gt;ChanObj: å…¨éƒ¨ä½™é¢åˆ¤å½’ Bob
        else çŠ¶æ€æ­£ç¡®ï¼Œå»¶è¿Ÿåˆ°æœŸå
            Alice-&gt;&gt;SetuChain: ProgramTx: claim_local&lt;br/&gt;{epoch â‰¥ close_epoch + delay}
            Bob-&gt;&gt;SetuChain: ProgramTx: claim_remote
            SetuChain-&gt;&gt;ChanObj: ä½™é¢åˆ†åˆ«è½¬å…¥å„è‡ªè´¦æˆ·
        end
    end"></div><h2 id="_2-æ”¹é€ æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#_2-æ”¹é€ æ­¥éª¤" aria-hidden="true">#</a> 2. æ”¹é€ æ­¥éª¤</h2><p><strong>1. æ–°å¢Â <code>chaintype/</code>Â åŒ… â€” é“¾æ— å…³åŸºç¡€ç±»å‹</strong></p><p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºç‹¬ç«‹åŒ…ï¼Œå®šä¹‰æ‰€æœ‰é“¾æ— å…³çš„åŸå§‹ç±»å‹ï¼Œæ›¿ä»£ Bitcoin ç‰¹å®šç±»å‹åœ¨æ¥å£å±‚çš„ç›´æ¥ä½¿ç”¨ï¼š</p><table><thead><tr><th>æ–°ç±»å‹</th><th>æ›¿ä»£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>chaintype.TxID</code></td><td><code>chainhash.Hash</code></td><td>32 å­—èŠ‚äº¤æ˜“/å¯¹è±¡æ ‡è¯†</td></tr><tr><td><code>chaintype.ChannelPoint</code></td><td><code>wire.OutPoint</code></td><td>Bitcoin:Â <code>{TxID, Index}</code>ï¼›Setu:Â <code>ObjectID</code></td></tr><tr><td><code>chaintype.Amount</code></td><td><code>btcutil.Amount</code></td><td>ç»Ÿä¸€é‡‘é¢ç±»å‹ï¼ˆint64 æœ€å°å•ä½ï¼‰</td></tr><tr><td><code>chaintype.RawTx</code></td><td><code>*wire.MsgTx</code></td><td>å­—èŠ‚åºåˆ—åŒ–äº¤æ˜“ï¼ˆé“¾ç‰¹å®šæ ¼å¼ä¸é€æ˜ä¼ é€’ï¼‰</td></tr><tr><td><code>chaintype.Address</code></td><td><code>btcutil.Address</code></td><td>ç»Ÿä¸€åœ°å€æ¥å£</td></tr><tr><td><code>chaintype.PubKey</code></td><td><code>*btcec.PublicKey</code></td><td><code>[]byte</code>ï¼ˆsecp256k1 33 å­—èŠ‚ / Ed25519 32 å­—èŠ‚ï¼‰</td></tr><tr><td><code>chaintype.Signature</code></td><td><code>*ecdsa.Signature</code></td><td><code>[]byte</code>ï¼ˆé“¾ç‰¹å®šç¼–ç ï¼‰</td></tr><tr><td><code>chaintype.FeeRate</code></td><td><code>chainfee.SatPerKWeight</code></td><td>æŠ½è±¡è´¹ç‡ï¼ˆBitcoin: sat/kw, Setu: gas priceï¼‰</td></tr><tr><td><code>chaintype.BlockHeight</code></td><td><code>uint32</code></td><td>Bitcoin: åŒºå—é«˜åº¦ï¼›Setu: epoch ç¼–å·</td></tr><tr><td><code>chaintype.ShortChannelID</code></td><td><code>lnwire.ShortChannelID</code></td><td>Bitcoin: 8 å­—èŠ‚ block:tx:posï¼›Setu: ObjectID å“ˆå¸Œæˆªæ–­æˆ–ç›´æ¥ 32 å­—èŠ‚</td></tr></tbody></table><p>åŒæ—¶å®šä¹‰Â <code>chaintype.ChainID</code>Â æšä¸¾æ ‡è¯†å½“å‰é“¾ï¼ˆ<code>Bitcoin</code>/<code>Setu</code>ï¼‰ï¼Œä»¥åŠÂ <code>chaintype.Converter</code>Â æ¥å£åšä¸åŒé“¾ç±»å‹é—´çš„ç¼–è§£ç ã€‚</p><p><strong>2. é‡å®šä¹‰æ ¸å¿ƒé“¾åç«¯æ¥å£</strong></p><p>ä¿®æ”¹ä»¥ä¸‹æ¥å£ä½¿å…¶ä½¿ç”¨Â <code>chaintype.*</code>Â è€ŒéÂ <code>wire.*</code>/<code>btcutil.*</code>ã€‚<strong>ä¿ç•™ç°æœ‰ Bitcoin å®ç°</strong>ï¼Œé€šè¿‡åŒ…è£…å™¨ (wrapper) åœ¨ Bitcoin ä¾§åšç±»å‹è½¬æ¢ï¼š</p><ul><li><strong><code>ChainNotifier</code></strong>Â (<a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">interface.go</a>) â€”Â <code>RegisterConfirmationsNtfn</code>/<code>RegisterSpendNtfn</code>Â å‚æ•°ä»Â <code>*chainhash.Hash</code>/<code>*wire.OutPoint</code>Â æ”¹ä¸ºÂ <code>chaintype.TxID</code>/<code>chaintype.ChannelPoint</code></li><li><strong><code>BlockChainIO</code></strong>Â (<a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">interface.go:567-597</a>) â€”Â <code>GetBestBlock</code>/<code>GetUtxo</code>/<code>GetBlock</code>Â è¿”å›å€¼æŠ½è±¡åŒ–</li><li><strong><code>Signer</code></strong>Â (<a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">signer.go</a>) â€”Â <code>SignOutputRaw</code>/<code>ComputeInputScript</code>Â å‚æ•°ä»Â <code>*wire.MsgTx</code>Â æ”¹ä¸ºÂ <code>chaintype.RawTx</code>Â + æŠ½è±¡Â <code>SignRequest</code></li><li><strong><code>WalletController</code></strong>Â (<a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">interface.go:230-563</a>) â€” è¿™æ˜¯æœ€å¤§æŒ‘æˆ˜ï¼›ç­–ç•¥æ˜¯æ‹†åˆ†ä¸º<strong>é€šç”¨é’±åŒ…æ¥å£</strong>ï¼ˆä½™é¢æŸ¥è¯¢ã€è½¬è´¦ã€åœ°å€ç”Ÿæˆï¼‰+Â <strong>é“¾ç‰¹æœ‰æ‰©å±•æ¥å£</strong>ï¼ˆBitcoin: PSBT/UTXO æ“ä½œï¼›Setu: å¯¹è±¡æ“ä½œï¼‰</li></ul><p><strong>3. æ‰©å±•Â <code>ChainControl</code>Â ä¸ºé“¾è°ƒåº¦å™¨</strong></p><p>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">chainregistry.go:193-220</a>Â ä¸­çš„Â <code>ChainControl</code>Â ç»“æ„ä½“ï¼š</p><ul><li>æ–°å¢Â <code>ChainType chaintype.ChainID</code>Â å­—æ®µ</li><li>åœ¨Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">chainregistry.go:266-350</a>Â çš„ switch è¯­å¥ä¸­æ–°å¢Â <code>&quot;setu&quot;</code>Â åˆ†æ”¯</li><li>åˆ›å»º chainreg/setu_params.go å®šä¹‰Â <code>SetuNetParams</code>ï¼ˆç½‘ç»œ IDã€åˆ›ä¸–å“ˆå¸Œã€é»˜è®¤ç«¯å£ã€epoch é—´éš”ï¼‰</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">config.go:249</a>Â æ–°å¢Â <code>SetuChainName = &quot;setu&quot;</code>Â å’ŒÂ <code>Setu *lncfg.Chain</code>Â é…ç½®é¡¹</li></ul><p><strong>4. å®ç° Setu é“¾é€šçŸ¥åç«¯Â <code>chainntnfs/setunotify/</code></strong></p><p>å®ç°Â <code>ChainNotifier</code>Â æ¥å£ï¼Œæ ¸å¿ƒæ˜ å°„å…³ç³»ï¼š</p><table><thead><tr><th>Bitcoin æ¦‚å¿µ</th><th>Setu å®ç°</th></tr></thead><tbody><tr><td><code>RegisterConfirmationsNtfn(txid, numConfs)</code></td><td>è®¢é˜…å¯¹è±¡æœ€ç»ˆç¡®å®šäº‹ä»¶ï¼ˆDAG æœ€ç»ˆæ€§é€šå¸¸ 1 æ¬¡ç¡®è®¤å³å¯ï¼‰</td></tr><tr><td><code>RegisterSpendNtfn(outpoint)</code></td><td>è®¢é˜… Channel Object çŠ¶æ€å˜æ›´ï¼ˆä½™é¢å˜åŒ–/å¯¹è±¡é”€æ¯ï¼‰</td></tr><tr><td><code>RegisterBlockEpochNtfn()</code></td><td>è®¢é˜… Setu epoch æ¨è¿›äº‹ä»¶</td></tr><tr><td>åŒºå—é‡ç»„æ£€æµ‹</td><td>å¤§å¹…ç®€åŒ–ï¼ˆDAG æ— ç»å…¸é‡ç»„ï¼‰</td></tr><tr><td><code>GetBlock()</code>Â /Â <code>GetBlockHash()</code></td><td>æŸ¥è¯¢ epoch ä¿¡æ¯ / DAG è½®æ¬¡æ•°æ®</td></tr></tbody></table><p><strong>5. å®ç° Setu é’±åŒ…Â <code>lnwallet/setuwallet/</code></strong></p><p>å®ç°é€‚é…åçš„Â <code>WalletController</code>Â æ¥å£ï¼š</p><table><thead><tr><th>Bitcoin æ“ä½œ</th><th>Setu æ“ä½œ</th></tr></thead><tbody><tr><td><code>ListUnspentWitness()</code>Â â€” åˆ—å‡º UTXO</td><td><code>GetBalance()</code>Â â€” æŸ¥è¯¢è´¦æˆ·ä½™é¢</td></tr><tr><td><code>LeaseOutput(OutPoint)</code>Â â€” é” UTXO</td><td><code>ReserveBalance(amount)</code>Â â€” é¢„ç•™ä½™é¢</td></tr><tr><td><code>SendOutputs([]*wire.TxOut)</code>Â â€” æ„å»º TX</td><td><code>Transfer(to, amount)</code>Â â€” è°ƒç”¨è½¬è´¦</td></tr><tr><td><code>FundPsbt()</code>Â /Â <code>SignPsbt()</code></td><td><code>BuildProgramTx()</code>Â /Â <code>SignProgramTx()</code>Â â€” æ„å»º Setu å¯ç¼–ç¨‹äº¤æ˜“</td></tr><tr><td>å¸é€‰æ‹©ï¼ˆ<code>selectInputs</code>ï¼‰</td><td>ä¸éœ€è¦ï¼ˆç›´æ¥ä»ä½™é¢æ‰£å‡ï¼‰</td></tr><tr><td>æ‰¾é›¶åœ°å€ç”Ÿæˆ</td><td>ä¸éœ€è¦</td></tr></tbody></table><p>å¯†é’¥ç®¡ç†æ–¹é¢ï¼šå¤ç”¨Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">derivation.go</a>Â çš„Â <code>KeyFamily</code>Â ä½“ç³»ï¼Œæ–°å¢ Setu coinTypeï¼Œå¯†é’¥è¡ç”Ÿæ”¯æŒ secp256k1 å’Œ Ed25519 åŒè·¯å¾„ã€‚</p><p><strong>6. Setu é“¾ä¸Šè„šæœ¬åˆçº¦ â€” åŸºäº 10 æ“ä½œç è§£é‡Šå™¨</strong></p><p>åŸºäº Setu çš„Â <code>ProgramTx</code>Â å’ŒÂ <code>{Nop, Const, Mov, BinOp, Cmp, LoadInput, StoreOutput, Jump, JumpIf, Halt}</code>Â æ“ä½œç ï¼Œå®ç°ä»¥ä¸‹é—ªç”µç½‘ç»œæ ¸å¿ƒåˆçº¦é€»è¾‘ï¼š</p><p><strong>6a. é€šé“èµ„é‡‘åˆçº¦ï¼ˆChannel Funding Programï¼‰</strong>ï¼š</p><ul><li>ä½¿ç”¨Â <code>Const</code>Â +Â <code>Cmp</code>Â +Â <code>JumpIf</code>Â å®ç°åŒæ–¹ç­¾åéªŒè¯åˆ†æ”¯</li><li><code>LoadInput</code>Â åŠ è½½ç­¾åæ•°æ®ï¼Œ<code>BinOp</code>Â åšå“ˆå¸Œè®¡ç®—</li><li>å¯¹è±¡å­—æ®µå­˜å‚¨ï¼š<code>local_balance</code>,Â <code>remote_balance</code>,Â <code>local_key</code>,Â <code>remote_key</code>,Â <code>state_num</code></li></ul><p><strong>6b. HTLC åˆçº¦ç¨‹åº</strong>ï¼š</p><ul><li>ä¸‰è·¯å¾„åˆ†æ”¯ï¼ˆ<code>JumpIf</code>ï¼‰ï¼šâ‘  åŸåƒè§£é”ï¼ˆ<code>BinOp</code>Â åš SHA256 æ¯”è¾ƒï¼‰â‘¡ è¶…æ—¶å›æ”¶ï¼ˆ<code>Cmp</code>Â æ¯”è¾ƒå½“å‰ epochï¼‰â‘¢ æ’¤é”€æƒ©ç½šï¼ˆç­¾åéªŒè¯ï¼‰</li><li><code>LoadInput</code>Â ä»äº¤æ˜“è¾“å…¥åŠ è½½åŸåƒ/ç­¾å</li><li><code>StoreOutput</code>Â å†™å…¥ä½™é¢å˜æ›´</li></ul><p><strong>6c. æ—¶é—´é”å®ç°</strong>ï¼š</p><ul><li><strong>ç›¸å¯¹æ—¶é—´é”ï¼ˆCSV ç­‰ä»·ï¼‰</strong>ï¼š<code>LoadInput(current_epoch)</code>Â â†’Â <code>Const(creation_epoch + delay)</code>Â â†’Â <code>Cmp</code>Â â†’Â <code>JumpIf(fail)</code></li><li><strong>ç»å¯¹æ—¶é—´é”ï¼ˆCLTV ç­‰ä»·ï¼‰</strong>ï¼š<code>LoadInput(current_epoch)</code>Â â†’Â <code>Const(expiry_epoch)</code>Â â†’Â <code>Cmp</code>Â â†’Â <code>JumpIf(fail)</code></li></ul><p><strong>6d. æ’¤é”€/æƒ©ç½šæœºåˆ¶</strong>ï¼š</p><ul><li>å¯¹è±¡çŠ¶æ€ä¸­å­˜å‚¨Â <code>revocation_key</code></li><li>è‹¥æ£€æµ‹åˆ°æ—§çŠ¶æ€å¹¿æ’­ï¼ŒæŒæœ‰æ’¤é”€å¯†é’¥çš„ä¸€æ–¹å¯è°ƒç”¨æƒ©ç½šå…¥å£ï¼ˆé€šè¿‡ç­¾åéªŒè¯åˆ†æ”¯ï¼‰</li></ul><p>åœ¨ Go ä¾§åˆ›å»ºÂ <code>input/setu_programs.go</code>ï¼Œå°è£…ä¸Šè¿°åˆçº¦çš„æ„å»ºå‡½æ•°ï¼ˆç­‰ä»·äºç°æœ‰Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">script_utils.go</a>Â çš„ 3275 è¡Œ Bitcoin Script æ„å»ºï¼‰ã€‚</p><p><strong>7. é€šé“æ ‡è¯†ä½“ç³»é‡è®¾è®¡</strong></p><ul><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">channel_id.go</a>Â â€”Â <code>NewChanIDFromOutPoint</code>Â åœ¨ Setu é“¾ä¸Šç›´æ¥ä½¿ç”¨ ObjectID çš„å‰ 32 å­—èŠ‚ï¼Œæ— éœ€ XOR å˜æ¢</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">short_channel_id.go</a>Â â€” Setu æ¨¡å¼ä¸‹Â <code>ShortChannelID</code>Â ä½¿ç”¨ ObjectIDï¼ˆ32 å­—èŠ‚ï¼‰ã€‚è·¯ç”±åè®®æ¶ˆæ¯ä¸­çš„ç¼–ç éœ€æ‰©å±•ä¸ºå˜é•¿æˆ–ä½¿ç”¨ TLV æ‰©å±•å­—æ®µæ‰¿è½½å®Œæ•´ ObjectID</li><li>æ›´æ–°Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">channel.go</a>Â â€”Â <code>FundingOutpoint</code>Â å­—æ®µæ”¹ä¸ºÂ <code>chaintype.ChannelPoint</code>ï¼Œæ•°æ®åº“ schema éœ€æ”¯æŒ Bitcoin OutPoint å’Œ Setu ObjectID ä¸¤ç§æ ¼å¼çš„åºåˆ—åŒ–</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">channel_edge_info.go</a>Â â€”Â <code>BitcoinKey1Bytes</code>/<code>BitcoinKey2Bytes</code>Â é‡å‘½åä¸ºÂ <code>ChainKey1Bytes</code>/<code>ChainKey2Bytes</code>ï¼Œæˆ–ä¿ç•™ Bitcoin å­—æ®µå¹¶æ–°å¢Â <code>SetuKey1Bytes</code>/<code>SetuKey2Bytes</code></li></ul><p><strong>8. é€šé“çŠ¶æ€æœºé€‚é…</strong></p><p><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">channel.go</a>ï¼ˆ10185 è¡Œï¼‰çš„æ”¹é€ ç­–ç•¥æ˜¯<strong>åˆ†ç¦»åè®®é€»è¾‘ä¸é“¾ä¸Šæ“ä½œ</strong>ï¼š</p><ul><li>æå–æ¥å£Â <code>CommitmentBuilder</code>ï¼šBitcoin å®ç°æ„å»ºÂ <code>wire.MsgTx</code>Â æ‰¿è¯ºäº¤æ˜“ï¼ŒSetu å®ç°æ„å»ºÂ <code>ProgramTx</code>Â çŠ¶æ€æ›´æ–°</li><li>æå–æ¥å£Â <code>ScriptEngine</code>ï¼šBitcoin å®ç°ä½¿ç”¨Â <code>txscript</code>Â éªŒè¯/æ„å»ºè„šæœ¬ï¼ŒSetu å®ç°ä½¿ç”¨ 10 æ“ä½œç è§£é‡Šå™¨</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">commitment.go</a>Â â€”Â <code>CommitmentKeyRing</code>Â çš„å¯†é’¥è¡ç”Ÿä¿ç•™é€šç”¨é€»è¾‘ï¼Œç­¾å/éªŒè¯å§”æ‰˜ç»™Â <code>Signer</code>Â æ¥å£</li><li>ä¿ç•™çŠ¶æ€ç¼–å·ï¼ˆ<code>StateNum</code>ï¼‰ã€HTLC ç®¡ç†ï¼ˆ<code>UpdateLog</code>ï¼‰ã€æ’¤é”€å¯†é’¥äº¤æ¢ï¼ˆ<a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">shachain</a>ï¼‰çš„æ ¸å¿ƒæ¥åè®®é€»è¾‘ä¸å˜</li></ul><p><strong>9. èµ„é‡‘ç®¡ç†å™¨é€‚é…</strong></p><p>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">manager.go</a>ï¼š</p><ul><li><code>waitForFundingConfirmation</code>Â â€” Setu æ¨¡å¼ä¸‹ç­‰å¾… DAG æœ€ç»ˆç¡®å®šï¼ˆ1 æ¬¡ç¡®è®¤ï¼‰ï¼Œå¤§å¹…ç¼©çŸ­è¶…æ—¶</li><li>èµ„é‡‘äº¤æ˜“æ„å»ºä»Â <code>chanfunding.WalletAssembler</code>ï¼ˆUTXO é€‰æ‹©ï¼‰åˆ‡æ¢åˆ°æ–°çš„Â <code>chanfunding.SetuAssembler</code>ï¼ˆç›´æ¥åˆ›å»º Channel Object + ä½™é¢é”å®šï¼‰</li><li><code>ShortChannelID</code>Â ç”Ÿæˆé€»è¾‘ï¼šBitcoin ç­‰å¾…åœ¨åŒºå—ä¸­ç¡®è®¤åç¼–ç ä½ç½®ï¼›Setu åœ¨å¯¹è±¡åˆ›å»ºæœ€ç»ˆç¡®å®šåä½¿ç”¨ ObjectID</li></ul><p><strong>10. åˆçº¦è£å†³é€‚é…</strong></p><p>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">contractcourt</a>Â æ‰€æœ‰ resolverï¼š</p><ul><li><code>commitSweepResolver</code>Â â€” Setu: è°ƒç”¨ Channel Object çš„Â <code>claim_local_balance</code>Â å…¥å£</li><li><code>htlcTimeoutResolver</code>Â â€” Setu: è°ƒç”¨ HTLC çš„Â <code>timeout_claim</code>Â å…¥å£ï¼ˆç­‰å¾… epoch åˆ°æœŸï¼‰</li><li><code>htlcSuccessResolver</code>Â â€” Setu: è°ƒç”¨ HTLC çš„Â <code>preimage_claim</code>Â å…¥å£</li><li><code>breachArbitrator</code>Â â€” Setu: è°ƒç”¨ Channel Object çš„Â <code>penalize</code>Â å…¥å£ï¼ˆæäº¤æ’¤é”€å¯†é’¥ + æ—§çŠ¶æ€è¯æ˜ï¼‰</li><li><code>anchorResolver</code>Â â€” Setu:Â <strong>ä¸éœ€è¦</strong>ï¼ˆDAG æ— éœ€è´¹ç‡æå‡æœºåˆ¶ï¼‰</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">channel_arbitrator.go</a>Â æ£€æµ‹å¯¹è±¡çŠ¶æ€å˜æ›´è€Œé UTXO èŠ±è´¹</li></ul><p><strong>11. Sweep æ¨¡å—ç®€åŒ–</strong></p><p>åœ¨Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">sweep</a>Â ä¸­æ–°å¢ Setu æ¨¡å¼ï¼š</p><ul><li>ç§»é™¤ Bitcoin ç‰¹æœ‰çš„äº¤æ˜“æ„å»º (<code>wire.NewMsgTx</code>)ã€æƒé‡ä¼°ç®—ã€RBF/CPFP é€»è¾‘</li><li>Setu ä¸Šçš„&quot;æ‰«å›&quot;ç®€åŒ–ä¸ºï¼šè°ƒç”¨ Channel Object çš„Â <code>withdraw</code>Â å‡½æ•°å°†ä½™é¢è½¬å›ä¸ªäººè´¦æˆ·</li><li><code>FeeRate</code>Â ä»Â <code>SatPerKWeight</code>Â æ”¹ä¸ºÂ <code>chaintype.FeeRate</code>ï¼ˆSetu: gas priceï¼‰</li><li>æ‰¹é‡èšåˆä¼˜åŒ–åœ¨ Setu ä¸Šç”¨å¤„ä¸å¤§ï¼ˆæ¯æ¬¡è°ƒç”¨æˆæœ¬ä½äº Bitcoin TXï¼‰</li></ul><p><strong>12. å›¾ä¸å‘ç°é€‚é…</strong></p><ul><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">builder.go</a>Â â€” é€šé“å­˜æ´»æ€§æ£€æŸ¥ï¼šBitcoin æ£€æŸ¥ UTXO é›†åˆï¼›Setu æŸ¥è¯¢ Channel Object æ˜¯å¦ä»å­˜åœ¨äºçŠ¶æ€æ ‘ï¼ˆSMT æŸ¥è¯¢ï¼‰</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">gossiper.go</a>Â â€” é€šé“éªŒè¯ï¼šBitcoin éªŒè¯é“¾ä¸Š 2-of-2 å¤šç­¾è„šæœ¬ï¼›Setu éªŒè¯ Channel Object å­˜åœ¨ + åŒæ–¹ key åŒ¹é… + SMT Merkle è¯æ˜</li><li><code>chanvalidate/</code>Â æ–°å¢ Setu éªŒè¯é€»è¾‘</li></ul><p><strong>13. è´¹ç‡ä½“ç³»é€‚é…</strong></p><ul><li>åœ¨Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">chainfee</a>Â ä¸­æ–°å¢Â <code>SetuEstimator</code>Â å®ç°Â <code>Estimator</code>Â æ¥å£</li><li>Bitcoin:Â <code>EstimateFeePerKW(numBlocks)</code>Â â†’ Setu:Â <code>EstimateGasPrice(priority)</code></li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">rates.go</a>Â â€” æ–°å¢Â <code>GasPrice</code>Â ç±»å‹å’Œè½¬æ¢æ–¹æ³•</li><li>ç§»é™¤ Setu æ¨¡å¼ä¸‹çš„ dust é™åˆ¶æ£€æŸ¥ï¼ˆè´¦æˆ·æ¨¡å‹æ—  dust æ¦‚å¿µï¼‰</li></ul><p><strong>14. RPC ä¸å‘ç¥¨é€‚é…</strong></p><ul><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">rpcserver.go</a>Â ä¸­çš„Â <code>GetInfo</code>Â â€” æ ¹æ®Â <code>ChainType</code>Â è¿”å›Â <code>&quot;bitcoin&quot;</code>Â æˆ–Â <code>&quot;setu&quot;</code></li><li>é’±åŒ… RPCï¼ˆ<code>SendCoins</code>ã€<code>NewAddress</code>ã€<code>ListUnspent</code>ï¼‰éœ€æŒ‰é“¾ç±»å‹è°ƒåº¦</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">zpay32</a>Â â€” æ–°å¢ Setu HRPï¼ˆå¦‚Â <code>lnst</code>Â ä¸»ç½‘ã€<code>lnsts</code>Â æµ‹è¯•ç½‘ï¼‰</li><li>é‡‘é¢å•ä½åœ¨ proto å®šä¹‰ä¸­ä¿æŒä¸ºæœ€å°å•ä½æ•´æ•°ï¼Œç”±å®¢æˆ·ç«¯è§£é‡Š</li></ul><p><strong>15. é…ç½®ä¸å¯åŠ¨</strong></p><ul><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">config.go</a>Â â€” æ–°å¢Â <code>Setu *lncfg.Chain</code>ã€<code>SetuMode *lncfg.SetuNode</code></li><li>æ–°å¢ lncfg/setu.go â€” Setu èŠ‚ç‚¹é…ç½®ï¼ˆRPC åœ°å€ã€SDK è·¯å¾„ç­‰ï¼‰</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">config_builder.go</a>Â â€”Â <code>BuildChainControl</code>Â æ–°å¢ Setu åˆ†æ”¯</li><li>ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">server.go</a>Â â€” æ ¹æ®é“¾ç±»å‹åˆå§‹åŒ–å¯¹åº”å­ç³»ç»Ÿ</li></ul><hr><h2 id="_3-setu-é“¾å¿…é¡»æ”¯æŒçš„å®Œæ•´èƒ½åŠ›æ¸…å•" tabindex="-1"><a class="header-anchor" href="#_3-setu-é“¾å¿…é¡»æ”¯æŒçš„å®Œæ•´èƒ½åŠ›æ¸…å•" aria-hidden="true">#</a> 3. Setu é“¾å¿…é¡»æ”¯æŒçš„å®Œæ•´èƒ½åŠ›æ¸…å•</h2><h3 id="p0-â€”-æ ¸å¿ƒèƒ½åŠ›-æ— æ­¤èƒ½åŠ›åˆ™æ— æ³•è¿è¡Œé—ªç”µç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#p0-â€”-æ ¸å¿ƒèƒ½åŠ›-æ— æ­¤èƒ½åŠ›åˆ™æ— æ³•è¿è¡Œé—ªç”µç½‘ç»œ" aria-hidden="true">#</a> P0 â€” æ ¸å¿ƒèƒ½åŠ›ï¼ˆæ— æ­¤èƒ½åŠ›åˆ™æ— æ³•è¿è¡Œé—ªç”µç½‘ç»œï¼‰</h3><table><thead><tr><th>#</th><th>èƒ½åŠ›</th><th>è¯¦ç»†éœ€æ±‚</th><th>å¯¹åº” LND æ¨¡å—</th></tr></thead><tbody><tr><td>1</td><td><strong>å¯ç¼–ç¨‹äº¤æ˜“ (ProgramTx)</strong></td><td>10 æ“ä½œç è§£é‡Šå™¨éœ€æ”¯æŒï¼šæ¡ä»¶åˆ†æ”¯ã€å“ˆå¸Œæ¯”è¾ƒã€ç­¾åéªŒè¯ã€epoch æ¯”è¾ƒã€çŠ¶æ€è¯»å†™</td><td><code>input/setu_programs.go</code></td></tr><tr><td>2</td><td><strong>å…±äº«å¯¹è±¡ (Shared Object)</strong></td><td>Channel Object éœ€åŒæ–¹éƒ½èƒ½æ“ä½œï¼›çŠ¶æ€æ›´æ–°éœ€åŒæ–¹ç­¾åæˆæƒ</td><td><code>lnwallet/setuwallet/</code></td></tr><tr><td>3</td><td><strong>å“ˆå¸Œé” (Hashlock)</strong></td><td><code>BinOp</code>Â æ“ä½œç éœ€æ”¯æŒ SHA256ï¼Œ<code>Cmp</code>Â éœ€æ”¯æŒå­—èŠ‚æ•°ç»„/å“ˆå¸Œæ¯”è¾ƒ</td><td>HTLC åˆçº¦</td></tr><tr><td>4</td><td><strong>Epoch çº§æ—¶é—´æŸ¥è¯¢</strong></td><td><code>LoadInput</code>Â èƒ½åŠ è½½å½“å‰ epoch ç¼–å·ï¼Œåˆçº¦å¯æ®æ­¤åšæ—¶é—´é”åˆ¤æ–­</td><td>CSV/CLTV ç­‰ä»·</td></tr><tr><td>5</td><td><strong>å¯¹è±¡ç‰ˆæœ¬/åºåˆ—å·</strong></td><td>Channel Object éœ€æœ‰å•è°ƒé€’å¢çš„Â <code>state_num</code>ï¼Œé˜²æ­¢æ—§çŠ¶æ€é‡æ”¾</td><td>æ‰¿è¯ºäº¤æ˜“åºå·</td></tr><tr><td>6</td><td><strong>äº‹ä»¶è®¢é˜… API</strong></td><td>æŒ‰ ObjectID è®¢é˜…çŠ¶æ€å˜æ›´äº‹ä»¶ï¼ˆåˆ›å»ºã€æ›´æ–°ã€é”€æ¯ï¼‰ï¼›epoch æ¨è¿›äº‹ä»¶</td><td><code>chainntnfs/setunotify/</code></td></tr><tr><td>7</td><td><strong>æœ€ç»ˆæ€§é€šçŸ¥</strong></td><td>äº¤æ˜“æäº¤åèƒ½å›è°ƒé€šçŸ¥æœ€ç»ˆç¡®å®šçŠ¶æ€</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">manager.go</a>Â ç¡®è®¤æµç¨‹</td></tr><tr><td>8</td><td><strong>å¤šç­¾åéªŒè¯</strong></td><td><code>ProgramTx</code>Â ä¸­èƒ½éªŒè¯ 2-of-2 ç­¾åï¼ˆsecp256k1 ECDSA æˆ– Ed25519ï¼‰</td><td>èµ„é‡‘è¾“å‡º 2-of-2</td></tr><tr><td>9</td><td><strong>å¯¹è±¡æŸ¥è¯¢ API</strong></td><td>æŒ‰ ObjectID æŸ¥è¯¢å®Œæ•´å¯¹è±¡çŠ¶æ€ï¼ˆä½™é¢ã€å¯†é’¥ã€HTLC åˆ—è¡¨ç­‰ï¼‰</td><td><code>BlockChainIO</code>Â ç­‰ä»·</td></tr><tr><td>10</td><td><strong>åŸå­æ€§çŠ¶æ€æ›´æ–°</strong></td><td>åˆçº¦æ‰§è¡Œçš„çŠ¶æ€å˜æ›´è¦ä¹ˆå…¨éƒ¨ç”Ÿæ•ˆã€è¦ä¹ˆå…¨éƒ¨å›æ»š</td><td>é€šé“çŠ¶æ€ä¸€è‡´æ€§</td></tr><tr><td>11</td><td><strong>å¯†é’¥ç®¡ç† SDK</strong></td><td>Go SDK æ”¯æŒ secp256k1 å’Œ Ed25519 å¯†é’¥å¯¹ç”Ÿæˆã€HD è¡ç”Ÿã€ç­¾åã€éªŒè¯</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">keychain</a></td></tr><tr><td>12</td><td><strong>äº¤æ˜“æ„å»ºä¸å¹¿æ’­ SDK</strong></td><td>Go SDK æ”¯æŒç¼–ç¨‹æ„å»ºÂ <code>ProgramTx</code>ã€ç­¾åã€æäº¤åˆ°ç½‘ç»œ</td><td><code>lnwallet/setuwallet/</code></td></tr></tbody></table><h3 id="p1-â€”-é‡è¦èƒ½åŠ›-å½±å“å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§" tabindex="-1"><a class="header-anchor" href="#p1-â€”-é‡è¦èƒ½åŠ›-å½±å“å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§" aria-hidden="true">#</a> P1 â€” é‡è¦èƒ½åŠ›ï¼ˆå½±å“å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§ï¼‰</h3><table><thead><tr><th>#</th><th>èƒ½åŠ›</th><th>è¯¦ç»†éœ€æ±‚</th><th>å¯¹åº” LND æ¨¡å—</th></tr></thead><tbody><tr><td>13</td><td><strong>Merkle è¯æ˜ (SMT Proof)</strong></td><td>æä¾›å¯¹è±¡å­˜åœ¨æ€§/ä¸å­˜åœ¨æ€§çš„ Binary+Sparse Merkle Tree è¯æ˜</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">discovery</a>Â é€šé“éªŒè¯</td></tr><tr><td>14</td><td><strong>å†å²çŠ¶æ€æŸ¥è¯¢</strong></td><td>æŒ‰ epoch æŸ¥è¯¢ Channel Object çš„å†å²çŠ¶æ€ï¼ˆç”¨äºäº‰è®®ä»²è£ï¼‰</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">contractcourt</a></td></tr><tr><td>15</td><td><strong>Gas ä¼°ç®— API</strong></td><td>ä¼°ç®—Â <code>ProgramTx</code>Â æ‰§è¡Œçš„ gas æ¶ˆè€—</td><td><code>chainfee/</code></td></tr><tr><td>16</td><td><strong>æ‰¹é‡æ“ä½œ</strong></td><td>å•ç¬”äº¤æ˜“ä¸­åŸå­æ€§åœ°æ“ä½œå¤šä¸ªå¯¹è±¡ï¼ˆæ‰¹é‡ HTLC ç»“ç®—ï¼‰</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">sweep</a>Â æ‰¹é‡å¤„ç†</td></tr><tr><td>17</td><td><strong>å¯¹è±¡é”€æ¯é€šçŸ¥</strong></td><td>Channel Object è¢«é”€æ¯æ—¶ï¼ˆé€šé“å…³é—­ï¼‰ç”Ÿæˆå¯è®¢é˜…äº‹ä»¶</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">builder.go</a>Â é€šé“å­˜æ´»æ€§</td></tr><tr><td>18</td><td><strong>èŠ‚ç‚¹å‘ç°/P2P</strong></td><td>Setu ç½‘ç»œèŠ‚ç‚¹çš„ P2P è¿æ¥ä¿¡æ¯ï¼ˆç”¨äº LN gossip å¼•å¯¼ï¼‰</td><td><a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">chainreg</a>Â DNS ç§å­</td></tr></tbody></table><h3 id="p2-â€”-ä¼˜åŒ–èƒ½åŠ›-æå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#p2-â€”-ä¼˜åŒ–èƒ½åŠ›-æå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ" aria-hidden="true">#</a> P2 â€” ä¼˜åŒ–èƒ½åŠ›ï¼ˆæå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼‰</h3><table><thead><tr><th>#</th><th>èƒ½åŠ›</th><th>è¯¦ç»†éœ€æ±‚</th></tr></thead><tbody><tr><td>19</td><td><strong>è½»å®¢æˆ·ç«¯æ¨¡å¼</strong></td><td>ç±»ä¼¼ Neutrino çš„ Setu è½»èŠ‚ç‚¹ï¼ˆä»…éªŒè¯ Merkle è¯æ˜ï¼Œä¸å­˜å…¨é‡çŠ¶æ€ï¼‰</td></tr><tr><td>20</td><td><strong>Watchtower æ”¯æŒ</strong></td><td>ç¬¬ä¸‰æ–¹å¯ç›‘æ§ Channel Object çŠ¶æ€å¹¶åœ¨è¿çº¦æ—¶è‡ªåŠ¨æäº¤æƒ©ç½šäº¤æ˜“</td></tr><tr><td>21</td><td><strong>åŸå­è·¨é“¾æ“ä½œ</strong></td><td>æ”¯æŒ Bitcoinâ†”Setu çš„åŸå­äº¤æ¢/è·¨é“¾ HTLCï¼ˆå¦‚æœéœ€è¦åŒé“¾äº’æ“ä½œï¼‰</td></tr></tbody></table><hr><h2 id="_4-éªŒè¯" tabindex="-1"><a class="header-anchor" href="#_4-éªŒè¯" aria-hidden="true">#</a> 4. éªŒè¯</h2><ul><li><strong>å•å…ƒæµ‹è¯•</strong>: æ¯ä¸ªæ–°å¢çš„ Setu å®ç°ï¼ˆ<code>setunotify/</code>ã€<code>setuwallet/</code>ã€<code>setu_programs.go</code>ï¼‰ç‹¬ç«‹æµ‹è¯•ï¼Œmock Setu SDK</li><li><strong>é›†æˆæµ‹è¯•</strong>: ä¿®æ”¹Â <a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">itest</a>Â æ¡†æ¶ï¼Œæ–°å¢ Setu devnet backendï¼Œè¦†ç›–æ ¸å¿ƒåœºæ™¯ï¼š <ul><li>å¼€é€šé“ â†’ å‘é€æ”¯ä»˜ â†’ å¤šè·³è½¬å‘ â†’ åä½œå…³é—­</li><li>å•æ–¹é¢å…³é—­ â†’ HTLC è¶…æ—¶/æˆåŠŸè§£æ</li><li>è¿çº¦æ£€æµ‹ â†’ æƒ©ç½šäº¤æ˜“</li><li>åŒé“¾æ¨¡å¼ï¼šBitcoin å’Œ Setu é€šé“å…±å­˜</li></ul></li><li><strong>å‘½ä»¤</strong>:Â <code>make itest backend=setu</code>Â æˆ–Â <code>go test -tags setu [lnd](http://_vscodecontentref_/118).</code></li><li><strong>æ‰‹åŠ¨æ£€æŸ¥</strong>:Â <code>lncli --chain=setu getinfo</code>ã€<code>lncli --chain=setu openchannel</code></li></ul><h2 id="_5-å†³ç­–è®°å½•" tabindex="-1"><a class="header-anchor" href="#_5-å†³ç­–è®°å½•" aria-hidden="true">#</a> 5. å†³ç­–è®°å½•</h2><ul><li><strong>å¯†ç å­¦</strong>: åŒæ”¯æŒ secp256k1 + Ed25519ï¼ˆåŒ Suiï¼‰ï¼Œ<a href="/posts/vscode-file:/vscode-app/Applications/Visual%20Studio%20Code.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html" class="">keychain</a>Â éœ€æ‰©å±•åŒè·¯å¾„è¡ç”Ÿ</li><li><strong>åŒé“¾æ”¯æŒ</strong>: ä¿ç•™ Bitcoinï¼Œé€šè¿‡æ¥å£æŠ½è±¡ +Â <code>ChainControl</code>Â è°ƒåº¦åŒæ—¶æ”¯æŒ Setu</li><li><strong>åˆçº¦è¯­è¨€</strong>: Setu è‡ªå®šä¹‰ 10 æ“ä½œç è§£é‡Šå™¨ï¼ˆ<code>ProgramTx</code>ï¼‰ï¼Œé Move/EVM â€” éœ€ç²¾å¿ƒè®¾è®¡æ“ä½œç åºåˆ—å®ç° HTLC/æ—¶é—´é”/æ’¤é”€é€»è¾‘</li><li><strong>é€šé“ ID</strong>: Setu ä¸Šä½¿ç”¨ 32 å­—èŠ‚ ObjectID ç›´æ¥æ ‡è¯†é€šé“ï¼Œè·¯ç”±åè®®æ¶ˆæ¯ä¸­é€šè¿‡ TLV æ‰©å±•æ‰¿è½½</li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg><a class="external-link meta-item-label" href="https://github.com/ai-chen2050/ai-chen2050.github.io/edit/main/blog/posts/2026-02-28-Spanda-LN-P2P-payment-setu-integration.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--><!----><span>Edit this page on GitHub</span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><div class="pager"><a href="/post/2025/09/05/Cosmos-EVM-Chain-integration-Axelar-Bridge/" class="prev">Previous <br><span>Cosmos EVM Chain integration Axelar Bridge</span></a><!----></div><!--]--><!----></main><ul class="catalog" style="top:0px;"><li class="level-2 toc-link-_0-overview">0. Overview</li><li class="level-2 toc-link-_1-æµç¨‹äº¤äº’å›¾">1. æµç¨‹äº¤äº’å›¾</li><li class="level-3 toc-link-_1-åŒé“¾æŠ½è±¡æ¶æ„æ€»è§ˆ">1. åŒé“¾æŠ½è±¡æ¶æ„æ€»è§ˆ</li><li class="level-3 toc-link-_2-é€šé“ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”-bitcoin-vs-setu">2. é€šé“ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”ï¼ˆBitcoin vs Setuï¼‰</li><li class="level-3 toc-link-_3-å¼€é€šé“åºåˆ—äº¤äº’å›¾-setu-é€‚é…">3. å¼€é€šé“åºåˆ—äº¤äº’å›¾ï¼ˆSetu é€‚é…ï¼‰</li><li class="level-3 toc-link-_4-å¤šè·³-htlc-æ”¯ä»˜åºåˆ—å›¾">4. å¤šè·³ HTLC æ”¯ä»˜åºåˆ—å›¾</li><li class="level-3 toc-link-_5-å¼ºåˆ¶å…³é—­ä¸äº‰è®®è§£å†³æµç¨‹å›¾">5. å¼ºåˆ¶å…³é—­ä¸äº‰è®®è§£å†³æµç¨‹å›¾</li><li class="level-3 toc-link-_6-setu-programtx-åˆçº¦é€»è¾‘æ˜ å°„å›¾">6. Setu ProgramTx åˆçº¦é€»è¾‘æ˜ å°„å›¾</li><li class="level-3 toc-link-_7-æ¨¡å—æ”¹é€ ä¼˜å…ˆçº§ä¸ä¾èµ–å…³ç³»">7. æ¨¡å—æ”¹é€ ä¼˜å…ˆçº§ä¸ä¾èµ–å…³ç³»</li><li class="level-3 toc-link-_8-æ•°æ®æµ-é“¾ä¸Š-vs-é“¾ä¸‹äº¤äº’å…¨æ™¯">8. æ•°æ®æµï¼šé“¾ä¸Š vs é“¾ä¸‹äº¤äº’å…¨æ™¯</li><li class="level-2 toc-link-_2-æ”¹é€ æ­¥éª¤">2. æ”¹é€ æ­¥éª¤</li><li class="level-2 toc-link-_3-setu-é“¾å¿…é¡»æ”¯æŒçš„å®Œæ•´èƒ½åŠ›æ¸…å•">3. Setu é“¾å¿…é¡»æ”¯æŒçš„å®Œæ•´èƒ½åŠ›æ¸…å•</li><li class="level-3 toc-link-p0-â€”-æ ¸å¿ƒèƒ½åŠ›-æ— æ­¤èƒ½åŠ›åˆ™æ— æ³•è¿è¡Œé—ªç”µç½‘ç»œ">P0 â€” æ ¸å¿ƒèƒ½åŠ›ï¼ˆæ— æ­¤èƒ½åŠ›åˆ™æ— æ³•è¿è¡Œé—ªç”µç½‘ç»œï¼‰</li><li class="level-3 toc-link-p1-â€”-é‡è¦èƒ½åŠ›-å½±å“å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§">P1 â€” é‡è¦èƒ½åŠ›ï¼ˆå½±å“å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§ï¼‰</li><li class="level-3 toc-link-p2-â€”-ä¼˜åŒ–èƒ½åŠ›-æå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ">P2 â€” ä¼˜åŒ–èƒ½åŠ›ï¼ˆæå‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼‰</li><li class="level-2 toc-link-_4-éªŒè¯">4. éªŒè¯</li><li class="level-2 toc-link-_5-å†³ç­–è®°å½•">5. å†³ç­–è®°å½•</li></ul></div><!--]--></div><div class="search-page" role="search"><span class="search-close"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" width="28" height="28" fill="currentColor"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg></span><div class="gungnir-search-box"><input placeholder="$ grep ..." autocomplete="off" spellcheck="false" value><!----></div></div><div class="menu-btn-container"><div class="menu-btn-wrapper"><div class="menu-btn"><div style="" class="menu-btn-icon"><span></span><span></span><span></span></div><div style="display:none;" class="menu-text">0</div><svg class="menu-progress"><circle class="menu-border" cx="50%" cy="50%" r="48%" style="stroke-dasharray:0% 314.15926%;"></circle></svg></div><div class="menu-btn-child-wrapper"><div title="toggle color mode" class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/></svg><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 00283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div><div class="menu-btn-child menu-toc-btn"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M48 48a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm0 160a48 48 0 1048 48 48 48 0 00-48-48zm448 16H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-320H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16V80a16 16 0 00-16-16zm0 160H176a16 16 0 00-16 16v32a16 16 0 0016 16h320a16 16 0 0016-16v-32a16 16 0 00-16-16z"/></svg></div><div class="toggle-sidebar-button menu-btn-child menu-btn-sidebar" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div><footer class="footer"><span>
      &copy; <a href="https://github.com/ai-chen2050" target="_blank">Blakechan</a> 2018-2026
    </span></footer></div><!--]--></div>
    <script type="module" src="/assets/app.70947246.js" defer></script>
  </body>
</html>
